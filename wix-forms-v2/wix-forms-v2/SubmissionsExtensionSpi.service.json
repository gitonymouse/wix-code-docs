{
  "name": "SubmissionsExtensionSpi",
  "memberOf": "wix-forms-v2",
  "mixes": [],
  "callbacks": [],
  "extra": {},
  "clientId": "wix-forms.v2-submission_extension",
  "docs": {},
  "relatedGuides": [],
  "properties": [],
  "operations": [
    {
      "name": "validateSubmission",
      "params": [
        {
          "name": "options",
          "type": [
            {
              "referenceType": "wix-forms-v2.SubmissionsExtensionSpi.ValidateSubmissionOptions"
            }
          ],
          "doc": "",
          "required": false
        }
      ],
      "requiredFields": [
        "options.actionType",
        "options.submission"
      ],
      "ret": {
        "type": [
          {
            "complexType": {
              "nativeType": "Promise",
              "typeParams": [
                {
                  "referenceType": "wix-forms-v2.SubmissionsExtensionSpi.ValidateSubmissionResponse"
                }
              ]
            }
          }
        ],
        "doc": null
      },
      "docs": {
        "summary": "> **Note:**\n> The Form Submission SPI is only available in Wix Studio.\nValidates a submission.\nValidates a site visitor's form submission and returns any validation violations.\nSite visitors can see the validation violations on their forms. For example,  invalid fields are highlighted in red.",
        "description": [],
        "examples": [
          {
            "title": "validateSubmission example",
            "body": [
              "import { submissionsExtensionSpi } from 'wix-forms.v2';",
              "  ",
              " async function validateSubmission(options) {",
              "   try {",
              "     const result = await submissionsExtensionSpi.validateSubmission(options);",
              "",
              "     return result;",
              "   } catch (error) {",
              "     console.error(error);",
              "     // Handle the error",
              "   }",
              " }",
              "  "
            ]
          }
        ]
      },
      "isVeloEvent": false,
      "customLabels": [
        {
          "id": "maturity-beta"
        }
      ],
      "syntaxName": "validateSubmission",
      "isAdminMethod": true
    }
  ],
  "messages": [
    {
      "name": "AlternativeUri",
      "members": [
        {
          "name": "absoluteUri",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "absolute uri that will be used by the host to call that method. The path-suffix mapped from the method http option will NOT be appended to this URI. For TPAs. it must be https"
        },
        {
          "name": "methodName",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "name of the method as it appears in the proto"
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "Context",
      "members": [
        {
          "name": "currency",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "3 capital letters string representing a currency according to ISO-4217"
        },
        {
          "name": "identity",
          "optional": true,
          "type": [
            {
              "referenceType": "wix-forms-v2.SubmissionsExtensionSpi.IdentificationData"
            }
          ],
          "doc": "The identification type and identity data"
        },
        {
          "name": "instanceId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "App instance ID of SPI in context"
        },
        {
          "name": "languages",
          "optional": true,
          "type": [
            {
              "complexType": {
                "nativeType": "Array",
                "typeParams": [
                  {
                    "nativeType": "string"
                  }
                ]
              }
            }
          ],
          "doc": "A string representing a language and region in the format of \"xx-XX\". First 2 letters represent the language code according to ISO 639-1. This is followed by a dash \"-\", and then a by 2 capital letters representing the region according to ISO 3166-2"
        },
        {
          "name": "requestId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "A unique identifier for each request. Can be used for logging / troubleshooting"
        }
      ],
      "docs": {
        "description": [
          "this message is not directly used by any service,\nit exists to describe the expected parameters that SHOULD be provided to invoked Velo methods as part of open-platform.\ne.g. SPIs, event-handlers, etc..\nNOTE: this context object MUST be provided as the last argument in each Velo method signature."
        ]
      }
    },
    {
      "name": "CreateOptions",
      "members": [],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "ExtendedFields",
      "members": [
        {
          "name": "namespaces",
          "optional": true,
          "type": [
            {
              "complexType": {
                "nativeType": "Record",
                "typeParams": [
                  {
                    "nativeType": "string"
                  },
                  {
                    "nativeType": "Object"
                  }
                ]
              }
            }
          ],
          "doc": "Extended field data. Each key corresponds to the namespace of the app that created the extended fields.\nThe value of each key is structured according to the schema defined when the extended fields were configured.\n\nYou can only access fields for which you have the appropriate permissions.\n\nLearn more about [extended fields](https://dev.wix.com/docs/rest/articles/getting-started/extended-fields).\n"
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "FormSubmission",
      "members": [
        {
          "name": "_createdDate",
          "readOnly": true,
          "optional": true,
          "type": [
            {
              "nativeType": "Date"
            }
          ],
          "doc": "Date and time the form submission was created."
        },
        {
          "name": "_id",
          "readOnly": true,
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Submission ID."
        },
        {
          "name": "_updatedDate",
          "readOnly": true,
          "optional": true,
          "type": [
            {
              "nativeType": "Date"
            }
          ],
          "doc": "Date and time the form submission was updated."
        },
        {
          "name": "extendedFields",
          "optional": true,
          "type": [
            {
              "referenceType": "wix-forms-v2.SubmissionsExtensionSpi.ExtendedFields"
            }
          ],
          "doc": "Data extensions ExtendedFields."
        },
        {
          "name": "formId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "ID of the form which submission belongs to."
        },
        {
          "name": "namespace",
          "readOnly": true,
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "The app which the form submissions belong to. For example, the namespace for the Wix Forms App is `\"wix.form_app.form\"`. The namespace of a submission can be retrieved using the Get Submission endpoint."
        },
        {
          "name": "orderDetails",
          "optional": true,
          "type": [
            {
              "referenceType": "wix-forms-v2.SubmissionsExtensionSpi.OrderDetails"
            }
          ],
          "doc": "Order details."
        },
        {
          "name": "revision",
          "readOnly": true,
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Revision number, which increments by 1 each time the form submission is updated. To prevent conflicting changes, the existing revision must be used when updating a form submission."
        },
        {
          "name": "seen",
          "optional": true,
          "type": [
            {
              "nativeType": "boolean"
            }
          ],
          "doc": "Whether the submission was read by a site Extension with permissions to manage submissions."
        },
        {
          "name": "status",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Status of the submission.\n- `PENDING`: When a submission has been created, but has not yet been recorded in the submission table of the forms dashboard.\n- `PAYMENT_WAITING`: When a submission of form, requiring payment, has been created.\n- `PAYMENT_CANCELED`: When a submission's of form, requiring payment, order has been canceled.\n- `CONFIRMED`: When a submission is recorded in the submissions table of the forms dashboard."
        },
        {
          "name": "submissions",
          "optional": true,
          "type": [
            {
              "nativeType": "Object"
            }
          ],
          "doc": "Submission values where key is the form field and value is the data submitted for the given field."
        },
        {
          "name": "submitter",
          "readOnly": true,
          "optional": true,
          "type": [
            {
              "referenceType": "wix-forms-v2.SubmissionsExtensionSpi.Submitter"
            }
          ],
          "doc": "ID of the creator of the form submission."
        }
      ],
      "docs": {
        "description": [
          "Form submission that was created or retrieved."
        ]
      }
    },
    {
      "name": "FormSubmissionSpiExtensionConfig",
      "members": [
        {
          "name": "deploymentUri",
          "optional": true,
          "type": [
            {
              "referenceType": "wix-forms-v2.SubmissionsExtensionSpi.SpiBaseUri"
            }
          ],
          "doc": "URI where the SPI Implementer is deployed"
        },
        {
          "name": "namespaceConfigs",
          "optional": true,
          "type": [
            {
              "complexType": {
                "nativeType": "Array",
                "typeParams": [
                  {
                    "referenceType": "wix-forms-v2.SubmissionsExtensionSpi.FormsSubmissionsExtensionNamespaceConfig"
                  }
                ]
              }
            }
          ],
          "doc": "Namespace names."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "FormsSubmissionsExtensionNamespaceConfig",
      "members": [
        {
          "name": "namespace",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Targeted namespace, with what submissions should trigger defined methods."
        },
        {
          "name": "submissionValidationEnabled",
          "optional": true,
          "type": [
            {
              "nativeType": "boolean"
            }
          ],
          "doc": "Enable submission validation."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "IdentificationData",
      "members": [
        {
          "name": "anonymousVisitorId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "ID of a site visitor that has not logged in to the site."
        },
        {
          "name": "appId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "ID of an app."
        },
        {
          "name": "identityType",
          "readOnly": true,
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Supported values:\n- `'ANONYMOUS_VISITOR'`\n- `'APP'`\n- `'MEMBER'`\n- `'UNKNOWN'`\n- `'WIX_USER'`"
        },
        {
          "name": "memberId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "ID of a site visitor that has logged in to the site."
        },
        {
          "name": "wixUserId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "ID of a Wix user (site owner, contributor, etc.)."
        }
      ],
      "extra": {
        "oneOfGroups": [
          {
            "name": "oneOfIdentificationDataIdOneOf",
            "members": [
              "anonymousVisitorId",
              "appId",
              "memberId",
              "wixUserId"
            ]
          }
        ]
      },
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "IdentificationDataIdOneOf",
      "members": [
        {
          "name": "anonymousVisitorId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "ID of a site visitor that has not logged in to the site."
        },
        {
          "name": "appId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "ID of an app."
        },
        {
          "name": "memberId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "ID of a site visitor that has logged in to the site."
        },
        {
          "name": "wixUserId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "ID of a Wix user (site owner, contributor, etc.)."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "OrderDetails",
      "members": [
        {
          "name": "checkoutId",
          "readOnly": true,
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "ID of the checkout related to submission (applicable if form has payments added)."
        },
        {
          "name": "currency",
          "readOnly": true,
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Currency."
        },
        {
          "name": "itemSubtotal",
          "readOnly": true,
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Item subtotal."
        },
        {
          "name": "number",
          "readOnly": true,
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Order number."
        },
        {
          "name": "orderId",
          "readOnly": true,
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "ID of the order related to submission (applicable if form has payments added)."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "Owner",
      "members": [
        {
          "name": "applicationId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Service ID."
        },
        {
          "name": "memberId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Member ID."
        },
        {
          "name": "userId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "User ID."
        },
        {
          "name": "visitorId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Visitor ID."
        }
      ],
      "extra": {
        "oneOfGroups": [
          {
            "name": "oneOfOwnerOwnerOneOf",
            "members": [
              "applicationId",
              "memberId",
              "userId",
              "visitorId"
            ]
          }
        ]
      },
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "OwnerOwnerOneOf",
      "members": [
        {
          "name": "applicationId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Service ID."
        },
        {
          "name": "memberId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Member ID."
        },
        {
          "name": "userId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "User ID."
        },
        {
          "name": "visitorId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Visitor ID."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "SpiBaseUri",
      "members": [
        {
          "name": "alternativeUris",
          "optional": true,
          "type": [
            {
              "complexType": {
                "nativeType": "Array",
                "typeParams": [
                  {
                    "referenceType": "wix-forms-v2.SubmissionsExtensionSpi.AlternativeUri"
                  }
                ]
              }
            }
          ],
          "doc": "override method mappings per method"
        },
        {
          "name": "baseUri",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "URI that will be used by the host to call the implementer. The path-suffix defined on the method will be appended to it"
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "SubmissionValidationError",
      "members": [
        {
          "name": "customErrorMessage",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Custom error message. The message is displayed instead of an error type."
        },
        {
          "name": "errorPath",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Path indicating the source of the error, such as `form.fields.target``."
        },
        {
          "name": "errorType",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Predefined error type."
        },
        {
          "name": "params",
          "optional": true,
          "type": [
            {
              "nativeType": "Object"
            }
          ],
          "doc": "Additional error parameters."
        }
      ],
      "extra": {
        "oneOfGroups": [
          {
            "name": "oneOfSubmissionValidationErrorErrorMessageOneOf",
            "members": [
              "customErrorMessage",
              "errorType"
            ]
          }
        ]
      },
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "SubmissionValidationErrorErrorMessageOneOf",
      "members": [
        {
          "name": "customErrorMessage",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Custom error message. The message is displayed instead of an error type."
        },
        {
          "name": "errorType",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Predefined error type."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "Submitter",
      "members": [
        {
          "name": "applicationId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Application ID."
        },
        {
          "name": "memberId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Member ID."
        },
        {
          "name": "userId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "User ID."
        },
        {
          "name": "visitorId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Visitor ID."
        }
      ],
      "extra": {
        "oneOfGroups": [
          {
            "name": "oneOfSubmitterSubmitterOneOf",
            "members": [
              "applicationId",
              "memberId",
              "userId",
              "visitorId"
            ]
          }
        ]
      },
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "SubmitterSubmitterOneOf",
      "members": [
        {
          "name": "applicationId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Application ID."
        },
        {
          "name": "memberId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Member ID."
        },
        {
          "name": "userId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "User ID."
        },
        {
          "name": "visitorId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Visitor ID."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "UpdateOptions",
      "members": [
        {
          "name": "currentSubmission",
          "optional": true,
          "type": [
            {
              "referenceType": "wix-forms-v2.SubmissionsExtensionSpi.FormSubmission"
            }
          ],
          "doc": "Submission to update."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "ValidateSubmissionOptions",
      "members": [
        {
          "name": "actionType",
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Whether to create or update the submission."
        },
        {
          "name": "submission",
          "type": [
            {
              "referenceType": "wix-forms-v2.SubmissionsExtensionSpi.FormSubmission"
            }
          ],
          "doc": "Submission to validate."
        },
        {
          "name": "updateOptions",
          "optional": true,
          "type": [
            {
              "referenceType": "wix-forms-v2.SubmissionsExtensionSpi.UpdateOptions"
            }
          ],
          "doc": "Data for updating an existing submission."
        }
      ],
      "extra": {
        "oneOfGroups": [
          {
            "name": "oneOfValidateSubmissionRequestActionsOneOf",
            "members": [
              "createOptions",
              "updateOptions"
            ]
          }
        ]
      },
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "ValidateSubmissionRequest",
      "members": [
        {
          "name": "actionType",
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Whether to create or update the submission."
        },
        {
          "name": "submission",
          "type": [
            {
              "referenceType": "wix-forms-v2.SubmissionsExtensionSpi.FormSubmission"
            }
          ],
          "doc": "Submission to validate."
        },
        {
          "name": "updateOptions",
          "optional": true,
          "type": [
            {
              "referenceType": "wix-forms-v2.SubmissionsExtensionSpi.UpdateOptions"
            }
          ],
          "doc": "Data for updating an existing submission."
        }
      ],
      "extra": {
        "oneOfGroups": [
          {
            "name": "oneOfValidateSubmissionRequestActionsOneOf",
            "members": [
              "createOptions",
              "updateOptions"
            ]
          }
        ]
      },
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "ValidateSubmissionRequestActionsOneOf",
      "members": [
        {
          "name": "updateOptions",
          "optional": true,
          "type": [
            {
              "referenceType": "wix-forms-v2.SubmissionsExtensionSpi.UpdateOptions"
            }
          ],
          "doc": "Data for updating an existing submission."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "ValidateSubmissionResponse",
      "members": [
        {
          "name": "errors",
          "optional": true,
          "type": [
            {
              "complexType": {
                "nativeType": "Array",
                "typeParams": [
                  {
                    "referenceType": "wix-forms-v2.SubmissionsExtensionSpi.SubmissionValidationError"
                  }
                ]
              }
            }
          ],
          "doc": "List of validation errors.\nIf there are no validation errors, returns an empty array."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    }
  ]
}
