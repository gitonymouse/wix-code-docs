{
  "name": "AppInstances",
  "memberOf": "wix-app-management-v2",
  "mixes": [],
  "callbacks": [],
  "extra": {},
  "clientId": "wix-app-management.v2-app_instance",
  "docs": {},
  "relatedGuides": [],
  "properties": [],
  "operations": [
    {
      "name": "getAppInstance",
      "params": [],
      "requiredFields": [],
      "ret": {
        "type": [
          {
            "complexType": {
              "nativeType": "Promise",
              "typeParams": [
                {
                  "referenceType": "wix-app-management-v2.AppInstances.GetAppInstanceResponse"
                }
              ]
            }
          }
        ],
        "doc": null
      },
      "docs": {
        "summary": "Retrieves data about the instance of your app that's installed on the Wix\nsite and the site itself.",
        "description": [
          "You don't have to explicitly pass an identifier for the Wix site as part of\nthe request, since this information is taken automatically from the context.\n\nIn case you want `site.ownerInfo` to be included in the response, you must\nhave the __Read Site Owner Email__ permission scope in addition to\n__WIX_DEVELOPERS.MANAGE_APP_INSTANCE__."
        ],
        "examples": [
          {
            "title": "getAppInstance example for dashboard page code",
            "body": [
              "import { appInstances } from 'wix-app-management.v2';",
              "",
              "async function getAppInstance() {",
              "  try {",
              "    const result = await appInstances.getAppInstance();",
              "    return result;",
              "  } catch (error) {",
              "    console.error(error);",
              "    // Handle the error",
              "  }",
              "}",
              ""
            ]
          },
          {
            "title": "getAppInstance example for exporting from backend code",
            "body": [
              "import { appInstances } from 'wix-app-management.v2';",
              "import { webMethod, Permissions } from 'wix-web-module';",
              "import { elevate } from 'wix-auth';",
              "",
              "const elevatedGetAppInstance = elevate(appInstances.getAppInstance);",
              "",
              "export const getAppInstance = webMethod(",
              "  Permissions.Anyone,",
              "  async () => {",
              "    try {",
              "      const result = await elevatedGetAppInstance();",
              "      return result;",
              "    } catch (error) {",
              "      console.error(error);",
              "      // Handle the error",
              "    }",
              "  }",
              ");",
              ""
            ]
          }
        ]
      },
      "isVeloEvent": false,
      "customLabels": [
        {
          "id": "maturity-beta"
        }
      ],
      "syntaxName": "getAppInstance",
      "isAdminMethod": true
    }
  ],
  "messages": [
    {
      "name": "AppInstalled",
      "members": [
        {
          "name": "appId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Unique identifier of the app within the website."
        },
        {
          "name": "originInstanceId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Instance ID of the app in the original website (relevant only when this site was [duplicated from another site](https://support.wix.com/en/article/duplicating-your-site-1472847))."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "AppInstance",
      "members": [
        {
          "name": "appName",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "App name, as set by you in the Wix Developers Center during the app creation\nprocess."
        },
        {
          "name": "appVersion",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Version of your app that's installed on the Wix site, as set by you in the\nWix Developers Center during the app creation process."
        },
        {
          "name": "availablePlans",
          "optional": true,
          "type": [
            {
              "complexType": {
                "nativeType": "Array",
                "typeParams": [
                  {
                    "referenceType": "wix-app-management-v2.AppInstances.AvailablePlan"
                  }
                ]
              }
            }
          ],
          "doc": "Plans available to this app instance."
        },
        {
          "name": "billing",
          "optional": true,
          "type": [
            {
              "referenceType": "wix-app-management-v2.AppInstances.BillingInfo"
            }
          ],
          "doc": "Billing information for the app instance. Available only in case\n`{\"isFree\": false}`."
        },
        {
          "name": "copiedFromTemplate",
          "optional": true,
          "type": [
            {
              "nativeType": "boolean"
            }
          ],
          "doc": "Whether the app instance was created when another Wix site was cloned."
        },
        {
          "name": "freeTrialAvailable",
          "optional": true,
          "type": [
            {
              "nativeType": "boolean"
            }
          ],
          "doc": "Whether the app instance includes a free trial that hasn't started yet."
        },
        {
          "name": "instanceId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "ID of the app instance. You can use it to keep track of the individual\ndata that's associated with the specific occurence of your app that's\ninstalled on a Wix site."
        },
        {
          "name": "isFree",
          "optional": true,
          "type": [
            {
              "nativeType": "boolean"
            }
          ],
          "doc": "Whether the site owners have installed a free or paid version of your app\non their site."
        },
        {
          "name": "isOriginSiteTemplate",
          "optional": true,
          "type": [
            {
              "nativeType": "boolean"
            }
          ],
          "doc": "__Deprecated__. This parameter will be removed on March 30, 2023. Use\n`copiedFromTemplate` instead."
        },
        {
          "name": "originInstanceId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "ID of the Wix site from which the instance of your app has been cloned.\nAvailable only in case `{\"copiedFromTemplate\": true}`.\nAll visual settings of the Wix site and app data are duplicated during the\ncloning process. Wix also notifies you in case there is any additional\nexternal functionality for the original site."
        },
        {
          "name": "permissions",
          "optional": true,
          "type": [
            {
              "complexType": {
                "nativeType": "Array",
                "typeParams": [
                  {
                    "nativeType": "string"
                  }
                ]
              }
            }
          ],
          "doc": "List of [permissions](https://dev.wix.com/docs/build-apps/developer-tools/developers-center/example-app-walkthrough/build-an-app#4-add-permissions)\nthat the site owners have granted your app. You set the list of permissions that\nyour app requires from the site owners in the Wix Developers Center during the\napp creation process."
        }
      ],
      "docs": {
        "description": [
          "An app instance is a specific occurrence of your app on a particular Wix site.\nWhen a site owner installs your app, a unique instance is generated for that\nspecific site. Use the `instanceId` to keep track of the individual data\nassociated with each app instance."
        ]
      }
    },
    {
      "name": "AppRemoved",
      "members": [
        {
          "name": "appId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Unique identifier of the app within the website."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "AvailablePlan",
      "members": [
        {
          "name": "packageName",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Package name of the available plan."
        },
        {
          "name": "source",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Source of the available plan. Can be a bundle or 3rd-party app."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "BillingInfo",
      "members": [
        {
          "name": "autoRenewing",
          "optional": true,
          "type": [
            {
              "nativeType": "boolean"
            }
          ],
          "doc": "Whether the app's subscription automatically renews at the end of the\ncurrent billing cycle."
        },
        {
          "name": "billingCycle",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Interval of the billing cycle. `\"ONE_TIME\"` means that site owners have\npurchased unlimited access to the app with a single, upfront payment."
        },
        {
          "name": "expirationDate",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Date and time the app's current billing cycle ends in\n`YYYY-MM-DDThh:mm:ss.sssZ` format. Available only for yearly and\nmulti-yearly plans."
        },
        {
          "name": "freeTrialInfo",
          "optional": true,
          "type": [
            {
              "referenceType": "wix-app-management-v2.AppInstances.FreeTrialInfo"
            }
          ],
          "doc": "Information about the free trial applied, if relevant."
        },
        {
          "name": "invoiceId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "ID of the invoice for the current billing cycle."
        },
        {
          "name": "packageName",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Name of the package that the site owner has paid for."
        },
        {
          "name": "source",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Information about any discounts applied to the app instance's current billing cycle.\nIf the site owners applied a developer coupon or Wix Voucher\nwhen installing the paid version of your app, this field holds the coupon's\nname or `“Wix discount coupon”`. Site owners may receive a Wix Voucher when\nupgrading their Wix subscription. If there is no discount for the\ncurrent billing cycle, the field is an empty string."
        },
        {
          "name": "timeStamp",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Date and time the site owners have purchased the app's paid plan in\n`YYYY-MM-DDThh:mm:ss.sssZ` format."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "FreeTrialInfo",
      "members": [
        {
          "name": "endDate",
          "readOnly": true,
          "optional": true,
          "type": [
            {
              "nativeType": "Date"
            }
          ],
          "doc": "When the free trial has ended. Populated only once the free trial is over."
        },
        {
          "name": "status",
          "readOnly": true,
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Current free trial status.\n\nSupported values:\n\n- `IN_PROGRESS`: The free trial is currently in progress.\n- `ENDED`: The free trial has ended.\n- `NOT_AVAILABLE`: No free trial was applied, as none was available."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "GetAppInstanceByInstanceIdRequest",
      "members": [
        {
          "name": "instanceId",
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "ID of the app instance to retrieve."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "GetAppInstanceRequest",
      "members": [],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "GetAppInstanceResponse",
      "members": [
        {
          "name": "instance",
          "optional": true,
          "type": [
            {
              "referenceType": "wix-app-management-v2.AppInstances.AppInstance"
            }
          ],
          "doc": "Retrieved app instance."
        },
        {
          "name": "site",
          "optional": true,
          "type": [
            {
              "referenceType": "wix-app-management-v2.AppInstances.SiteInfo"
            }
          ],
          "doc": "Information about the corresponding Wix site."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "IdentificationData",
      "members": [
        {
          "name": "anonymousVisitorId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "ID of a site visitor that has not logged in to the site."
        },
        {
          "name": "appId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "ID of an app."
        },
        {
          "name": "identityType",
          "readOnly": true,
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Supported values:\n- `'ANONYMOUS_VISITOR'`\n- `'APP'`\n- `'MEMBER'`\n- `'UNKNOWN'`\n- `'WIX_USER'`"
        },
        {
          "name": "memberId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "ID of a site visitor that has logged in to the site."
        },
        {
          "name": "wixUserId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "ID of a Wix user (site owner, contributor, etc.)."
        }
      ],
      "extra": {
        "oneOfGroups": [
          {
            "name": "oneOfIdentificationDataIdOneOf",
            "members": [
              "anonymousVisitorId",
              "appId",
              "memberId",
              "wixUserId"
            ]
          }
        ]
      },
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "IdentificationDataIdOneOf",
      "members": [
        {
          "name": "anonymousVisitorId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "ID of a site visitor that has not logged in to the site."
        },
        {
          "name": "appId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "ID of an app."
        },
        {
          "name": "memberId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "ID of a site visitor that has logged in to the site."
        },
        {
          "name": "wixUserId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "ID of a Wix user (site owner, contributor, etc.)."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "Locale",
      "members": [
        {
          "name": "country",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Two-letter country code in [ISO-3166 alpha-2](https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2#Officially_assigned_code_elements) format."
        },
        {
          "name": "languageCode",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Two-letter language code in [ISO 639-1 alpha-2](https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes) format."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "MessageEnvelope",
      "members": [
        {
          "name": "data",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Stringify payload."
        },
        {
          "name": "eventType",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Event type."
        },
        {
          "name": "identity",
          "optional": true,
          "type": [
            {
              "referenceType": "wix-app-management-v2.AppInstances.IdentificationData"
            }
          ],
          "doc": "The identification type and identity data."
        },
        {
          "name": "instanceId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "App instance ID."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "Multilingual",
      "members": [
        {
          "name": "isMultiLingual",
          "optional": true,
          "type": [
            {
              "nativeType": "boolean"
            }
          ],
          "doc": "Whether the site supports more than a single language."
        },
        {
          "name": "supportedLanguages",
          "optional": true,
          "type": [
            {
              "complexType": {
                "nativeType": "Array",
                "typeParams": [
                  {
                    "referenceType": "wix-app-management-v2.AppInstances.SupportedLanguage"
                  }
                ]
              }
            }
          ],
          "doc": "List of supported languages. Returned only when `{\"isMultiLingual\": true}`."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "OwnerInfo",
      "members": [
        {
          "name": "email",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Site owner's email address. Identical to the site owner's login email."
        },
        {
          "name": "emailStatus",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Supported values: `VERIFIED_OPT_IN`, `VERIFIED_OPT_OUT`,\n`NOT_VERIFIED_OPT_IN`, `NOT_VERIFIED_OPT_OUT`.\n\nWhether the site owner has verified their email and whether they have chosen\nto receive email notifications from Wix.\n"
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "PaidPlanAutoRenewalCancelled",
      "members": [
        {
          "name": "cancelReason",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Supported values: `UNKNOWN_CANCELLATION_TYPE_ERROR_STATE`, `USER_CANCEL`, `FAILED_PAYMENT`, `TRANSFER_CANCELLATION_REASON`. Reason provided by app for cancellation (if relevant)."
        },
        {
          "name": "cycle",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Current payment cycle."
        },
        {
          "name": "operationTimeStamp",
          "optional": true,
          "type": [
            {
              "nativeType": "Date"
            }
          ],
          "doc": "Date and time of auto-renewal cancellation."
        },
        {
          "name": "subscriptionCancellationType",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Cancellation type."
        },
        {
          "name": "userReason",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Reason provided by site owner for cancellation (if relevant)."
        },
        {
          "name": "vendorProductId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Current app plan."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "PaidPlanChanged",
      "members": [
        {
          "name": "couponName",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Coupon applied to purchase (if relevant)."
        },
        {
          "name": "cycle",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Newly selected payment cycle."
        },
        {
          "name": "invoiceId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Invoice ID."
        },
        {
          "name": "operationTimeStamp",
          "optional": true,
          "type": [
            {
              "nativeType": "Date"
            }
          ],
          "doc": "Date and time of change."
        },
        {
          "name": "previousCycle",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Previous payment cycle."
        },
        {
          "name": "previousVendorProductId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Previous app plan."
        },
        {
          "name": "vendorProductId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Newly purchased app plan."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "PaidPlanPurchased",
      "members": [
        {
          "name": "couponName",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Coupon applied to purchase (if relevant)."
        },
        {
          "name": "cycle",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Selected payment cycle."
        },
        {
          "name": "expiresOn",
          "optional": true,
          "type": [
            {
              "nativeType": "Date"
            }
          ],
          "doc": "Plan expiration date."
        },
        {
          "name": "invoiceId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Invoice ID."
        },
        {
          "name": "operationTimeStamp",
          "optional": true,
          "type": [
            {
              "nativeType": "Date"
            }
          ],
          "doc": "Date and time of purchase."
        },
        {
          "name": "vendorProductId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Purchased app plan."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "SiteInfo",
      "members": [
        {
          "name": "description",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Description of the site."
        },
        {
          "name": "installedWixApps",
          "optional": true,
          "type": [
            {
              "complexType": {
                "nativeType": "Array",
                "typeParams": [
                  {
                    "nativeType": "string"
                  }
                ]
              }
            }
          ],
          "doc": "Wix apps that are installed on the site."
        },
        {
          "name": "locale",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "2-letter language code of the site's locale in\n[ISO 639-1 alpha-2](https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes) format."
        },
        {
          "name": "multilingual",
          "optional": true,
          "type": [
            {
              "referenceType": "wix-app-management-v2.AppInstances.Multilingual"
            }
          ],
          "doc": "Information about the site's supported languages."
        },
        {
          "name": "ownerEmail",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "> **Deprecation Notice:** This parameter will be removed on June 30, 2022. Use `ownerInfo` instead."
        },
        {
          "name": "ownerInfo",
          "optional": true,
          "type": [
            {
              "referenceType": "wix-app-management-v2.AppInstances.OwnerInfo"
            }
          ],
          "doc": "Information about the site owner. Available only when calling\n_Get App Instance_ with the __Read Site Owner Email__ permission scope."
        },
        {
          "name": "paymentCurrency",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "3-letter currency code for the site's billing in\n[ISO-4217 alphabetic](https://en.wikipedia.org/wiki/ISO_4217#Active_codes) format."
        },
        {
          "name": "siteDisplayName",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Display name of the site."
        },
        {
          "name": "siteId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Site ID."
        },
        {
          "name": "url",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "URL of the site. Available only in case the site has been published."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "SupportedLanguage",
      "members": [
        {
          "name": "countryCode",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Language icon."
        },
        {
          "name": "isPrimary",
          "optional": true,
          "type": [
            {
              "nativeType": "boolean"
            }
          ],
          "doc": "Whether the supported language is the primary language for the site."
        },
        {
          "name": "languageCode",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Two-letter language code in [ISO 639-1 alpha-2](https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes) format."
        },
        {
          "name": "locale",
          "optional": true,
          "type": [
            {
              "referenceType": "wix-app-management-v2.AppInstances.Locale"
            }
          ],
          "doc": "Locale."
        },
        {
          "name": "resolutionMethod",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "How the language will be resolved. For internal use."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    }
  ]
}
