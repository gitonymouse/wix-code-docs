{
  "name": "TaxCalculation",
  "memberOf": "wix-billing-v2",
  "mixes": [],
  "callbacks": [],
  "extra": {},
  "clientId": "wix-billing.v2-tax_calculation_gateway",
  "docs": {},
  "relatedGuides": [],
  "properties": [],
  "operations": [
    {
      "name": "calculateTax",
      "params": [
        {
          "name": "options",
          "type": [
            {
              "referenceType": "wix-billing-v2.TaxCalculation.CalculateTaxOptions"
            }
          ],
          "doc": "",
          "required": false
        }
      ],
      "requiredFields": [
        "options.addresses",
        "options.lineItems",
        "options.lineItems._id",
        "options.lineItems.addressIndex",
        "options.lineItems.price"
      ],
      "ret": {
        "type": [
          {
            "complexType": {
              "nativeType": "Promise",
              "typeParams": [
                {
                  "referenceType": "wix-billing-v2.TaxCalculation.CalculateTaxResponse"
                }
              ]
            }
          }
        ],
        "doc": null
      },
      "docs": {
        "summary": "The main function of the Tax Service API is to calculate tax for a given set of line items and addresses.\nTax is returned in granularity of line items, and can be calculated for multiple addresses.\nThe tax calculation is done by a tax calculator app, which is installed on the site.",
        "description": [],
        "examples": [
          {
            "title": "calculateTax example",
            "body": [
              "import { taxCalculation } from 'wix-billing.v2';",
              "  ",
              " async function calculateTax(options) {",
              "   try {",
              "     const result = await taxCalculation.calculateTax(options);",
              "",
              "     return result;",
              "   } catch (error) {",
              "     console.error(error);",
              "     // Handle the error",
              "   }",
              " }",
              "  "
            ]
          }
        ]
      },
      "isVeloEvent": false,
      "customLabels": [
        {
          "id": "maturity-beta"
        }
      ],
      "syntaxName": "calculateTax"
    },
    {
      "name": "listTaxCalculators",
      "params": [],
      "requiredFields": [],
      "ret": {
        "type": [
          {
            "complexType": {
              "nativeType": "Promise",
              "typeParams": [
                {
                  "referenceType": "wix-billing-v2.TaxCalculation.ListTaxCalculatorsResponse"
                }
              ]
            }
          }
        ],
        "doc": null
      },
      "docs": {
        "summary": "List all the tax calculators that are installed on the site.\nThe list will include the appDefID, display name, and supported countries for each calculator.",
        "description": [],
        "examples": [
          {
            "title": "listTaxCalculators example",
            "body": [
              "import { taxCalculation } from 'wix-billing.v2';",
              "  ",
              " async function listTaxCalculators() {",
              "   try {",
              "     const result = await taxCalculation.listTaxCalculators();",
              "",
              "     return result;",
              "   } catch (error) {",
              "     console.error(error);",
              "     // Handle the error",
              "   }",
              " }",
              "  "
            ]
          }
        ]
      },
      "isVeloEvent": false,
      "customLabels": [
        {
          "id": "maturity-beta"
        }
      ],
      "syntaxName": "listTaxCalculators",
      "isAdminMethod": true
    }
  ],
  "messages": [
    {
      "name": "Address",
      "members": [
        {
          "name": "addressLine1",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Main address line, usually street and number as free text."
        },
        {
          "name": "addressLine2",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Free text providing more detailed address info. Usually contains Apt, Suite, and Floor."
        },
        {
          "name": "city",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "City name."
        },
        {
          "name": "country",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Country code - 2 letters ISO-3166-1."
        },
        {
          "name": "postalCode",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Zip/postal code."
        },
        {
          "name": "subdivision",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Subdivision. Usually a state, region, prefecture, or province code, according to [ISO 3166-2](https://en.wikipedia.org/wiki/ISO_3166-2)."
        }
      ],
      "docs": {
        "description": [
          "Wix common address format for physical address to use if you plan to store addresses in your service."
        ]
      }
    },
    {
      "name": "AddressIndex",
      "members": [
        {
          "name": "multipleAddresses",
          "optional": true,
          "type": [
            {
              "referenceType": "wix-billing-v2.TaxCalculation.MultipleAddresses"
            }
          ],
          "doc": "this is used for example for tax calculation of items shipped from store warehouse to a shipping address."
        },
        {
          "name": "singleAddress",
          "optional": true,
          "type": [
            {
              "nativeType": "number"
            }
          ],
          "doc": "single address is used for example for tax calculation of a store location.\nIt is a zero-based index of the transaction location in the addresses_info list."
        }
      ],
      "extra": {
        "oneOfGroups": [
          {
            "name": "oneOfAddressIndexAddressIndexOptionsOneOf",
            "members": [
              "multipleAddresses",
              "singleAddress"
            ]
          }
        ]
      },
      "docs": {
        "description": [
          "AddressIndex represents the addresses used for tax calculation of a specific line item. Indices are Zero-based."
        ]
      }
    },
    {
      "name": "AddressIndexAddressIndexOptionsOneOf",
      "members": [
        {
          "name": "multipleAddresses",
          "optional": true,
          "type": [
            {
              "referenceType": "wix-billing-v2.TaxCalculation.MultipleAddresses"
            }
          ],
          "doc": "this is used for example for tax calculation of items shipped from store warehouse to a shipping address."
        },
        {
          "name": "singleAddress",
          "optional": true,
          "type": [
            {
              "nativeType": "number"
            }
          ],
          "doc": "single address is used for example for tax calculation of a store location.\nIt is a zero-based index of the transaction location in the addresses_info list."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "AggregatedTaxBreakdown",
      "members": [
        {
          "name": "aggregatedTaxAmount",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "The sum of all the tax amounts that were calculated for this tax details (tax name, tax type, jurisdiction, jurisdiction type, rate)."
        },
        {
          "name": "jurisdiction",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "The name of the jurisdiction in which this tax detail applies."
        },
        {
          "name": "jurisdictionType",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "The type of the jurisdiction in which this tax detail applies (e.g. Country,State,County,City,Special)."
        },
        {
          "name": "rate",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "The rate at which this tax detail was calculated, e.g 0.1000 signifies 10% tax and 2.000 signifies 200% tax. (Decimal value)"
        },
        {
          "name": "taxName",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "The name of the tax against which this tax amount was calculated."
        },
        {
          "name": "taxType",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "The type of tax that was calculated. Depends on the company's nexus settings as well as the jurisdiction's tax laws."
        }
      ],
      "docs": {
        "description": [
          "The summary of the tax breakdown for all the line items. It will hold for each tax name, the aggregated tax amount paid for it and the tax rate.\nTax breakdown is the tax amount split to the tax authorities that applied on the line item."
        ]
      }
    },
    {
      "name": "ApplicationError",
      "members": [
        {
          "name": "code",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Error code."
        },
        {
          "name": "data",
          "optional": true,
          "type": [
            {
              "nativeType": "Object"
            }
          ],
          "doc": "Data related to the error."
        },
        {
          "name": "description",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Description of the error."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "CalculateTaxOptions",
      "members": [
        {
          "name": "addresses",
          "type": [
            {
              "complexType": {
                "nativeType": "Array",
                "typeParams": [
                  {
                    "referenceType": "wix-billing-v2.TaxCalculation.Address"
                  }
                ]
              }
            }
          ],
          "doc": "All the relevant addresses for this calculation should be listed here. Line items will hold only reference to them."
        },
        {
          "name": "currency",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "The tax calculation three-character ISO 4217 currency code that was used for payment for this transaction.\nThe currency fraction size is specified in ISO 4217 and affects the way we will format the tax amount,\nbut not affect the rate value that is always 4 as its 0.0000 to 1.0000 value.\ne.g. when using USD the required fraction size is 2 - so for 25.544$ we will show 25.55$. (round up)"
        },
        {
          "name": "externalId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "An optional identifier of the entity that you are calculating tax for. For example, cart ID or checkout ID."
        },
        {
          "name": "lineItems",
          "type": [
            {
              "complexType": {
                "nativeType": "Array",
                "typeParams": [
                  {
                    "referenceType": "wix-billing-v2.TaxCalculation.LineItem"
                  }
                ]
              }
            }
          ],
          "doc": "A list of line items to be taxed."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "CalculateTaxRequest",
      "members": [
        {
          "name": "addresses",
          "type": [
            {
              "complexType": {
                "nativeType": "Array",
                "typeParams": [
                  {
                    "referenceType": "wix-billing-v2.TaxCalculation.Address"
                  }
                ]
              }
            }
          ],
          "doc": "All the relevant addresses for this calculation should be listed here. Line items will hold only reference to them."
        },
        {
          "name": "currency",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "The tax calculation three-character ISO 4217 currency code that was used for payment for this transaction.\nThe currency fraction size is specified in ISO 4217 and affects the way we will format the tax amount,\nbut not affect the rate value that is always 4 as its 0.0000 to 1.0000 value.\ne.g. when using USD the required fraction size is 2 - so for 25.544$ we will show 25.55$. (round up)"
        },
        {
          "name": "externalId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "An optional identifier of the entity that you are calculating tax for. For example, cart ID or checkout ID."
        },
        {
          "name": "lineItems",
          "type": [
            {
              "complexType": {
                "nativeType": "Array",
                "typeParams": [
                  {
                    "referenceType": "wix-billing-v2.TaxCalculation.LineItem"
                  }
                ]
              }
            }
          ],
          "doc": "A list of line items to be taxed."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "CalculateTaxResponse",
      "members": [
        {
          "name": "addresses",
          "optional": true,
          "type": [
            {
              "complexType": {
                "nativeType": "Array",
                "typeParams": [
                  {
                    "referenceType": "wix-billing-v2.TaxCalculation.Address"
                  }
                ]
              }
            }
          ],
          "doc": "All the relevant addresses for this calculation should be listed here. Line items will hold only reference to them."
        },
        {
          "name": "currency",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "The tax estimation three-character ISO 4217 currency code that was used for payment for this transaction."
        },
        {
          "name": "errors",
          "optional": true,
          "type": [
            {
              "complexType": {
                "nativeType": "Array",
                "typeParams": [
                  {
                    "referenceType": "wix-billing-v2.TaxCalculation.ApplicationError"
                  }
                ]
              }
            }
          ],
          "doc": "The errors that occurred during the tax calculation."
        },
        {
          "name": "externalId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "An optional identifier of the entity that you are calculating tax for. For example, cart ID or checkout ID."
        },
        {
          "name": "lineItemTaxDetails",
          "optional": true,
          "type": [
            {
              "complexType": {
                "nativeType": "Array",
                "typeParams": [
                  {
                    "referenceType": "wix-billing-v2.TaxCalculation.LineItemTaxDetails"
                  }
                ]
              }
            }
          ],
          "doc": "The calculated tax for each line."
        },
        {
          "name": "taxSummary",
          "optional": true,
          "type": [
            {
              "referenceType": "wix-billing-v2.TaxCalculation.TaxSummary"
            }
          ],
          "doc": "Summary of the tax calculation."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "LineItem",
      "members": [
        {
          "name": "_id",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "The ID of the line item."
        },
        {
          "name": "addressIndex",
          "optional": true,
          "type": [
            {
              "referenceType": "wix-billing-v2.TaxCalculation.AddressIndex"
            }
          ],
          "doc": "The address of this line, which can be either from and to locations, or a single location."
        },
        {
          "name": "appId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "The app ID this item is related to."
        },
        {
          "name": "itemCode",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "The known SKU (item code) for this line item."
        },
        {
          "name": "itemName",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Free text description for this line item."
        },
        {
          "name": "price",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "The price of the line. This is the price of all items in the line together."
        },
        {
          "name": "quantity",
          "optional": true,
          "type": [
            {
              "nativeType": "number"
            }
          ],
          "doc": "The number of items."
        },
        {
          "name": "taxGroupId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "The tax group ID this item is related to. If not provided, the default tax rate will be applied."
        },
        {
          "name": "taxIncluded",
          "optional": true,
          "type": [
            {
              "nativeType": "boolean"
            }
          ],
          "doc": "Indicates whether the price already includes tax."
        }
      ],
      "docs": {
        "description": [
          "LineItem represents information about a line item."
        ]
      }
    },
    {
      "name": "LineItemTaxDetails",
      "members": [
        {
          "name": "_id",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "The ID of the line item."
        },
        {
          "name": "addressIndex",
          "optional": true,
          "type": [
            {
              "referenceType": "wix-billing-v2.TaxCalculation.AddressIndex"
            }
          ],
          "doc": "The address index of this line. Points to the relevant addresses in the addresses list."
        },
        {
          "name": "itemName",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Item description."
        },
        {
          "name": "quantity",
          "optional": true,
          "type": [
            {
              "nativeType": "number"
            }
          ],
          "doc": "The number of items."
        },
        {
          "name": "taxBreakdown",
          "optional": true,
          "type": [
            {
              "complexType": {
                "nativeType": "Array",
                "typeParams": [
                  {
                    "referenceType": "wix-billing-v2.TaxCalculation.TaxBreakdown"
                  }
                ]
              }
            }
          ],
          "doc": "A detailed description of all the tax authorities applied on this item."
        },
        {
          "name": "taxSummary",
          "optional": true,
          "type": [
            {
              "referenceType": "wix-billing-v2.TaxCalculation.LineItemTaxSummary"
            }
          ],
          "doc": "Summary of the tax calculation for this line."
        }
      ],
      "docs": {
        "description": [
          "lineItemTaxDetails represents all the relevant tax details for a specific line item."
        ]
      }
    },
    {
      "name": "LineItemTaxSummary",
      "members": [
        {
          "name": "appId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "The app id of the calculator that calculated this line tax."
        },
        {
          "name": "fullPrice",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "The full price of the line, total price for all items.\nTo determine the individual item price, divide this by quantity."
        },
        {
          "name": "taxAmount",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "The total amount of tax calculated for all lines in this estimate. This is the sum of all the tax amounts in the line items."
        },
        {
          "name": "taxableAmount",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "The portion of the total amount of this estimate that was taxable."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "ListTaxCalculatorsRequest",
      "members": [],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "ListTaxCalculatorsResponse",
      "members": [
        {
          "name": "taxCalculatorDetails",
          "optional": true,
          "type": [
            {
              "complexType": {
                "nativeType": "Array",
                "typeParams": [
                  {
                    "referenceType": "wix-billing-v2.TaxCalculation.TaxCalculatorDetails"
                  }
                ]
              }
            }
          ],
          "doc": "details of the installed tax calculators - including the appDefID, display name, and supported countries"
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "MultipleAddresses",
      "members": [
        {
          "name": "destination",
          "optional": true,
          "type": [
            {
              "nativeType": "number"
            }
          ],
          "doc": "The index of the destination address, where the specific line item is sent to."
        },
        {
          "name": "origin",
          "optional": true,
          "type": [
            {
              "nativeType": "number"
            }
          ],
          "doc": "The index of the origin address, where the specific line item came from."
        }
      ],
      "docs": {
        "description": [
          "MultipleAddresses are used for example for tax calculation of items shipped from store warehouse to a shipping address.\nIn this case origin is the warehouse address and destination is the shipping address."
        ]
      }
    },
    {
      "name": "TaxBreakdown",
      "members": [
        {
          "name": "jurisdiction",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "The name of the jurisdiction to which this tax detail applies. For example, \"New York\" or \"Quebec\"."
        },
        {
          "name": "jurisdictionType",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "The type of the jurisdiction in which this tax detail applies."
        },
        {
          "name": "nonTaxableAmount",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "The amount of this line item price that was considered nontaxable. (Decimal value)"
        },
        {
          "name": "rate",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "The rate at which this tax detail was calculated, e.g 0.1000 signifies 10% tax and 2.000 signifies 200% tax. (Decimal value)"
        },
        {
          "name": "taxAmount",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "The amount of tax estimated for this line item. (Decimal value)"
        },
        {
          "name": "taxName",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "The name of the tax against which this tax amount was calculated. For example, \"NY State Sales Tax\", \"Quebec GST\", etc.\nThis name should be explicit enough to allow the merchant to understand what tax was calculated."
        },
        {
          "name": "taxType",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "The type of tax that was calculated. Depends on the jurisdiction's tax laws. For example, \"Sales Tax\", \"Income Tax\", \"Value Added Tax\", etc."
        },
        {
          "name": "taxableAmount",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "The taxable amount of this line item. (Decimal value)"
        }
      ],
      "docs": {
        "description": [
          "TaxBreakdown represents tax information for a line item.\nIt holds the tax amount and the tax rate for each tax authority that apply on the line item."
        ]
      }
    },
    {
      "name": "TaxCalculationGateway",
      "members": [
        {
          "name": "_id",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": ""
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "TaxCalculatorDetails",
      "members": [
        {
          "name": "appId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "The calculator appDefID"
        },
        {
          "name": "displayName",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Tax calculator name used for display purposes."
        },
        {
          "name": "unsupportedCountries",
          "optional": true,
          "type": [
            {
              "complexType": {
                "nativeType": "Array",
                "typeParams": [
                  {
                    "nativeType": "string"
                  }
                ]
              }
            }
          ],
          "doc": "List of countries that the implementer does not support"
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "TaxSummary",
      "members": [
        {
          "name": "aggregatedTaxBreakdown",
          "optional": true,
          "type": [
            {
              "complexType": {
                "nativeType": "Array",
                "typeParams": [
                  {
                    "referenceType": "wix-billing-v2.TaxCalculation.AggregatedTaxBreakdown"
                  }
                ]
              }
            }
          ],
          "doc": "The summary of the tax breakdown for all the line items. It will hold for each tax name, the aggregated tax amount paid for it and the tax rate."
        },
        {
          "name": "totalAmount",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "The total amount of money for all the lines in this calculation."
        },
        {
          "name": "totalTax",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "The total amount of tax calculated for all lines in this calculation.\nThis is the sum of all the tax amounts in the line items.\nBecause of rounding, this may not be equal to the sum of the tax amounts in the line items."
        },
        {
          "name": "totalTaxIncludedInPrice",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "The sum of the tax_amount for all the line items with tax included in price set to true.\nThe total tax that is not included in price is calculated by subtracting this value from totalTax"
        },
        {
          "name": "totalTaxableAmount",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "The portion of the total amount of this calculation that was taxable. totalTaxable <= totalAmount."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    }
  ]
}
