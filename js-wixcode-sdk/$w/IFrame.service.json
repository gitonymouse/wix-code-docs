{ "name": "IFrame",
  "memberOf": "$w",
  "mixes":
    [ "$w.Element",
      "$w.HiddenCollapsedMixin" ],
  "labels":
    [ "changed" ],
  "location":
    { "lineno": 8,
      "filename": "IFrame.js" },
  "docs":
    { "summary": "An [iframe](https://support.wix.com/en/article/velo-working-with-the-html-iframe-element) element is a container for internal or external HTML code.",
      "description":
        [ "> This feature is only available in Wix Studio.",
          "",
          " Messages can be sent",
          " from your page code to the code in an iframe element and from the iframe element to your page code ",
          " using the [`postMessage()`](#postMessage) and",
          " [`onMessage()`](#onMessage) functions. To learn more about what code an iframe element",
          " can hold, see [here](https://support.wix.com/en/article/using-iframes-to-display-visible-content-on-your-site)." ],
      "links": [],
      "examples": [],
      "extra":
        {  } },
  "properties":
    [ { "name": "scrolling",
        "labels":
          [ "new" ],
        "get": true,
        "set": true,
        "type": "string",
        "locations":
          [ { "lineno": 61,
              "filename": "IFrame.js" },
            { "lineno": 68,
              "filename": "IFrame.js" } ],
        "docs":
          { "summary": "Sets or gets whether the iframe element displays scrollbars.",
            "description":
              [ "Setting the `scrolling` property sets what happens when the content in",
                " the iframe element is larger than the size of the component.",
                "",
                " The value can be set to:",
                "",
                " + `\"auto\"`: Scrollbars are displayed only if needed. (This is the default.)",
                " + `\"yes\"`: Scrollbars are always shown, even if they are not needed.",
                " + `\"no\"`: Scrollbars are never shown, even if they are needed).",
                "",
                " Getting the `scrolling` property returns which `ScrollType` the component",
                " is set to use." ],
            "links": [],
            "examples":
              [ { "title": "Set whether the iframe element displays scrollbars",
                  "body":
                    [ "$w(\"#myElement\").scrolling = \"no\";" ],
                  "extra":
                    {  } },
                { "title": "Get whether the iframe element displays scrollbars",
                  "body":
                    [ "let compScrolling = $w(\"#myElement\").scrolling; // \"auto\"" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "src",
        "labels":
          [ "new" ],
        "get": true,
        "set": true,
        "type": "string",
        "locations":
          [ { "lineno": 29,
              "filename": "IFrame.js" },
            { "lineno": 36,
              "filename": "IFrame.js" } ],
        "docs":
          { "summary": "Sets or gets the URL of the website that is displayed in the iframe element.",
            "description":
              [ "Setting the `src` property sets the website that is",
                " displayed in the iframe element. The `src` value must be set to an HTTPS",
                " URL.",
                "",
                " Getting the `src` property returns the URL of the website",
                " that is displayed in the Iframe element.",
                "",
                "> **Note:** The `src` property must be an HTTPS URL. Learn how to ",
                "[embed a site with an HTTP URL](https://support.wix.com/en/article/velo-working-with-the-html-iframe-element#embedding-another-site)." ],
            "links": [],
            "examples":
              [ { "title": "Get the displayed website's URL",
                  "body":
                    [ "let compUrl = $w(\"#myElement\").src;",
                      "// \"https://comp.com/page.html\"" ],
                  "extra":
                    {  } },
                { "title": "Set the displayed website",
                  "body":
                    [ "$w(\"#myElement\").src = \"https://en.wikipedia.org/wiki/HTTPS\";" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } } ],
  "operations":
    [ { "name": "onMessage",
        "labels":
          [ "new" ],
        "nameParams": [],
        "params":
          [ { "name": "handler",
              "type": "$w.IFrameMessageEventHandler",
              "doc": "The name of the function or\n the function expression to run when the iframe element sends a message." } ],
        "ret":
          { "type": "$w.IFrame",
            "doc": "The element that triggered the event." },
        "locations":
          [ { "lineno": 166,
              "filename": "IFrame.js" } ],
        "docs":
          { "summary": "Adds an event handler that runs when the iframe element\n sends a message.",
            "description":
              [ "The `onMessage()` function allows your page code to receive messages",
                " from an iframe element on your page. When a message is received,",
                " the specified event handler is executed and the message can be retrieved",
                " using `event.data`.",
                "",
                " To send a message from your iframe element, use the postMessage() function",
                " in the iframe element's code. Generally, you call postMessage()",
                " from within a function:",
                "",
                "     <script type=\"text/javascript\">",
                "       function sendReturnMessage(msg) {",
                "         window.parent.postMessage(msg, \"http://mysite.com\");",
                "       }",
                "     </script>",
                "",
                " When posting a message from within your iframe element, you should specify your",
                " site's URL as the `targetOrigin`. If you use `\"*\"` instead, your message can",
                " be intercepted by a malicious site. To learn more, see [Window.postMessage()](https://developer.mozilla.org/en-US/docs/Web/API/Window/postMessage).",
                "",
                " For more information on sending and receiving messages between your page",
                " and your iframe element, see [Working with the iframe element in Wix Code](https://support.wix.com/en/article/working-with-the-html-component-in-wix-code#messaging-1)." ],
            "links":
              [ "[postMessage( )](#postMessage)" ],
            "examples":
              [ { "title": "Receive a message from an iframe element",
                  "body":
                    [ "$w(\"#myElement\").onMessage( (event) => {",
                      "  let receivedMessage = event.data;",
                      "} );" ],
                  "extra":
                    {  } },
                { "title": "Communicate with an iframe element",
                  "body":
                    [ "$w.onReady(() => {",
                      "  // Send message to element",
                      "  $w('#sendButton').onClick(() => {",
                      "    $w('#myElement').postMessage('HELLO FROM THE PAGE');",
                      "  });",
                      "",
                      "  // Handle messages that the element sends to the page",
                      "  $w('#myElement').onMessage((event) => {",
                      "    $w('#message').text = event.data;",
                      "  });",
                      "});" ],
                  "extra":
                    { "description": "This example shows how to send information from the page to the iframe element and from the iframe element to the page. \n You can test out the code in our [example template](https://manage.wix.com/edit-template/from?originTemplateId=d39789d7-13ee-4208-8467-8a939cd8ed8c&templateId=cfd24f07-e15f-4091-b110-2b8b889fa1e3&autoDevMode=true)." } },
                { "title": "Send a message to an iframe element and receive a confirmation",
                  "body":
                    [ "/* * * * * * * * * * * * * * * * * * * * * * * * *",
                      " * Paste the following into the element:  *",
                      " * * * * * * * * * * * * * * * * * * * * * * * * *",
                      "",
                      "<!doctype html>",
                      "<html>",
                      "<head>",
                      "",
                      "<script type=\"text/javascript\">",
                      "function init () {",
                      "  // when a message is received from the page code",
                      "  window.onmessage = (event) => {",
                      "    if (event.data) {",
                      "      console.log(\"the element received a message!\");",
                      "      insertMessage(event.data);",
                      "    }",
                      "  }",
                      "}",
                      "",
                      "// display received message",
                      "function insertMessage(msg) {",
                      "  document.getElementById('demo').innerHTML = msg;",
                      "  sendReturnMessage(\"Message from the element!\");",
                      "}",
                      "",
                      "// send message to the page code",
                      "function sendReturnMessage(msg) {",
                      "  window.parent.postMessage(msg, \"http://mysite.com\");",
                      "}",
                      "</script>",
                      "",
                      "</head>",
                      "",
                      "<body onload=\"init();\" style=\"background-color:lightgray;\">",
                      "<h1>Element Test</h1>",
                      "<p id=\"demo\">Message will go here</p>",
                      "</body>",
                      "</html>",
                      "",
                      " * * * * * * * * * * * * * * * * * * * * * * * * *",
                      " * This is the page code:                        *",
                      " * * * * * * * * * * * * * * * * * * * * * * * * */",
                      "",
                      "$w.onReady(function () {",
                      "  // when a message is received from the element",
                      "  $w(\"#myElement\").onMessage( (event) => {",
                      "    console.log(`Message received by page code: ${event.data}`);",
                      "  } );",
                      "} );",
                      "",
                      "export function messageSendButton_onClick() {",
                      "  // send message to the element",
                      "  $w(\"#myElement\").postMessage(\"Message from page code!\");",
                      "}",
                      "" ],
                  "extra":
                    { "description": "This example assumes you have created a page with an iframe element\n whose ID is `myElement` and a button whose onClick event handler\n is set to `messageSendButton_onClick`.\n\n When the user clicks the button, a message is sent to the\n element. Code inside the element receives and displays the message. Then\n it sends a message back to the page code. The page code receives and\n logs the message." } } ],
            "extra":
              {  } },
        "extra":
          { "eventType": "message" } },
      { "name": "postMessage",
        "labels":
          [ "new" ],
        "nameParams": [],
        "params":
          [ { "name": "message",
              "type":
                [ "string",
                  "number",
                  "boolean",
                  "Object",
                  { "name": "Array",
                    "typeParams":
                      [ "*" ] } ],
              "doc": "The message to send to the iframe element." } ],
        "ret":
          { "type": "void" },
        "locations":
          [ { "lineno": 95,
              "filename": "IFrame.js" } ],
        "docs":
          { "summary": "Sends a message to the iframe element.",
            "description":
              [ "The `postMessage()` function sends a message from your page code to the",
                " iframe element.",
                "",
                " To receive the message sent from the `postMessage()` function in your",
                " iframe element, create an event handler for the `window.onmessage` event",
                " in the component's code. You create the event handler within an HTML",
                " `<script>` tag. You get the received data by getting the data property",
                " of the event handler's event parameter.",
                "",
                " Often, you define the `window.onMessage` event handler in a function",
                " that gets called when the iframe element loads using the `body onload`",
                " or `window.onload`:",
                "",
                "     <script type=\"text/javascript\">",
                "       window.onmessage = (event) => {",
                "         if (event.data) {",
                "           console.log(`iframe received a message: ${event.data}`);",
                "           // additional code here",
                "         }",
                "       }",
                "     </script>",
                "",
                "",
                " For more information on sending and receiving messages between your page",
                " and your iframe element, see [Working with the iframe element in Wix Code](https://support.wix.com/en/article/working-with-the-html-component-in-wix-code#messaging-1).",
                "",
                "> **Notes:**",
                "> + An iframe element needs to load before you can send it messages using the `postMessage()` function.",
                ">",
                ">",
                "> + Usually an iframe element finishes loading a",
                ">   short time after the page it is on finishes loading. So if you call",
                ">   `postMessage()` inside the page's [`onReady()`]($w.iFrame#onReady)",
                ">   event handler, the iframe element might not be ready yet.  To call `postMessage()`",
                ">   as soon as possible after a page loads, send a",
                ">   message from the iframe element to the page code as when the iframe element t is loaded and then call `postMessage()` upon receipt of that",
                ">   message.",
                ">",
                ">",
                "> + Also, an iframe element can send messages to the page it is on before the iframe element",
                ">   itself has loaded completely. For example, this can happen if the iframe element's body,",
                ">   or one of its downloaded images, is large. To make sure the iframe element is loaded,",
                ">   send messages only after listening for an onLoad event in the iframe element." ],
            "links":
              [ "[onMessage( )](#onMessage)" ],
            "examples":
              [ { "title": "Send a message to an iframe element",
                  "body":
                    [ "$w(\"#myElement\").postMessage(\"Message from page code!\");" ],
                  "extra":
                    {  } },
                { "title": "Communicate with an iframe element",
                  "body":
                    [ "$w.onReady(() => {",
                      "  // Send message to element",
                      "  $w('#sendButton').onClick(() => {",
                      "    $w('#myElement').postMessage('HELLO FROM THE PAGE');",
                      "  });",
                      "",
                      "  // Handle messages that the element sends to the page",
                      "  $w('#myElement').onMessage((event) => {",
                      "    $w('#message').text = event.data;",
                      "  });",
                      "});" ],
                  "extra":
                    { "description": "This example shows how to send information from the page to the iframe element and from the iframe element to the page. \n You can test out the code in our [example template](https://manage.wix.com/edit-template/from?originTemplateId=d39789d7-13ee-4208-8467-8a939cd8ed8c&templateId=cfd24f07-e15f-4091-b110-2b8b889fa1e3&autoDevMode=true)." } },
                { "title": "Send a message to an iframe element and receive a confirmation",
                  "body":
                    [ "/* * * * * * * * * * * * * * * * * * * * * * * * *",
                      " * Paste the following into the element:  *",
                      " * * * * * * * * * * * * * * * * * * * * * * * * *",
                      "",
                      "<!doctype html>",
                      "<html>",
                      "<head>",
                      "",
                      "<script type=\"text/javascript\">",
                      "function init () {",
                      "  // when a message is received from the page code",
                      "  window.onmessage = (event) => {",
                      "    if (event.data) {",
                      "      console.log(\"the element received a message!\");",
                      "      insertMessage(event.data);",
                      "    }",
                      "  }",
                      "}",
                      "",
                      "// display received message",
                      "function insertMessage(msg) {",
                      "  document.getElementById('demo').innerHTML = msg;",
                      "  sendReturnMessage(\"Message from the element!\");",
                      "}",
                      "",
                      "// send message to the page code",
                      "function sendReturnMessage(msg) {",
                      "  window.parent.postMessage(msg, \"http://mysite.com\");",
                      "}",
                      "</script>",
                      "",
                      "</head>",
                      "",
                      "<body onload=\"init();\" style=\"background-color:lightgray;\">",
                      "<h1>Element Test</h1>",
                      "<p id=\"demo\">Message will go here</p>",
                      "</body>",
                      "</html>",
                      "",
                      " * * * * * * * * * * * * * * * * * * * * * * * * *",
                      " * This is the page code:                        *",
                      " * * * * * * * * * * * * * * * * * * * * * * * * */",
                      "",
                      "$w.onReady(function () {",
                      "  // when a message is received from the element",
                      "  $w(\"#myElement\").onMessage( (event) => {",
                      "    console.log(`Message received by page code: ${event.data}`);",
                      "  } );",
                      "} );",
                      "",
                      "export function messageSendButton_onClick() {",
                      "  // send message to the element",
                      "  $w(\"#myElement\").postMessage(\"Message from page code!\");",
                      "}",
                      "" ],
                  "extra":
                    { "description": "This example assumes you have created a page with an iframe element\n whose ID is `myElement` and a button whose onClick event handler\n is set to `messageSendButton_onClick`.\n\n When the user clicks the button, a message is sent to the\n element. Code inside the element receives and displays the message. Then\n it sends a message back to the page code. The page code receives and\n logs the message." } } ],
            "extra":
              {  } },
        "extra":
          {  } } ],
  "callbacks": [],
  "messages": [],
  "extra":
    { "queryable": true } }